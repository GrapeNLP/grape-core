#!/bin/bash

ANDROID_SDK_FOLDER=/opt/android-sdk
ANDROID_CMAKE=$ANDROID_SDK_FOLDER/cmake/3.6.4111459/bin/cmake
ANDROID_TOOLCHAIN_FILE=$NDK_FOLDER/ndk-bundle/build/cmake/android.toolchain.cmake
BOOSTFORANDROID_FOLDER=$HOME/src/Boost-for-Android
ANDROID_NATIVE_API_LEVEL=21 
SUFFIX=""
if [ "$1" == "arm64-v8a" ]; then
  SUFFIX="-a64"
elif [ "$1" == "armeabi" -o "$1" == "armeabi-v7a" ]; then
  SUFFIX="-a32"
elif [ $1 == "x86_32" ]; then
  SUFFIX="-x32"
elif [ $1 == "x86_64" ]; then
  SUFFIX="-x64"
fi


$ANDROID_CMAKE \
 -DANDROID_ABI=$1 \
 -DANDROID_STL=c++_static \
 -DANDROID_CPP_FEATURES="rtti exceptions" \
 -DCMAKE_LIBRARY_OUTPUT_DIRECTORY=./android_libs \
 -DCMAKE_BUILD_TYPE=$2 \
 -DCMAKE_TOOLCHAIN_FILE=$ANDROID_TOOLCHAIN_FILE
 -DANDROID_NATIVE_API_LEVEL=$ANDROID_NATIVE_API_LEVEL \
 -DANDROID_TOOLCHAIN=clang \
 -DBoost_INCLUDE_DIR=$BOOSTFORANDROID_FOLDER/build/out/$1/include/boost-1_66 \
 -DBoost_PROGRAM_OPTIONS_LIBRARY=$BOOSTFORANDROID_FOLDER/build/out/$1/lib/libboost_program_options-clang-mt$SUFFIX-1_66.a \
 ../..

