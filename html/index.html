<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>grapenlp-core: ﻿GRAPENLP: Grammar Annotation Pattern Engine for Natural Language Processing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">grapenlp-core
   &#160;<span id="projectnumber">2.7.0</span>
   </div>
   <div id="projectbrief">GRAPENLP&#39;s grammar engine along with SWIG interfaces for Java and Python</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">﻿GRAPENLP: Grammar Annotation Pattern Engine for Natural Language Processing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/GrapeNLP/grapenlp-core"></a></p>
<p>GRAPENLP-core is an efficent engine for the application of local grammars, based on the algorithms described in <a href="http://igm.univ-mlv.fr/~sastre/publications/sastre11t.zip">http://igm.univ-mlv.fr/~sastre/publications/sastre11t.zip</a>. GRAPENLP can be used as a sentence recognizer in chatbots (see <a href="http://igm.univ-mlv.fr/~sastre/publications/sastre09ip.pdf">http://igm.univ-mlv.fr/~sastre/publications/sastre09ip.pdf</a>). In this case, grammar outputs are XML tags that either delimit the entities to extract or simply identify the intent the sentences belong to. The supported grammars are those written with the Unitex software (<a href="http://unitexgramlab.org/">http://unitexgramlab.org/</a>). These grammars are equivalent to CFGs with output but have a more readable graphical representation similar to flowcharts. Grammar boxes contain possible words to recognize and/or calls to subgrammars, and can also define an output. The sentences recognized by a Unitex grammar can be identified by following the flowchart, provided that subgrammar names are descriptive enough or proper comments are added to the grammar boxes.</p>
<p>Words to be recognized can be given by a set of conditions or predicates on their lexical, syntactic and semantic features (e.g. any inflected form of verb "to be"). GRAPENLP automatically adds weights to the grammar transitions depending of the specificity degree of the predicates used (e.g. &lt;TOKEN&gt; predicate gets 0 points since it recognizes any token, while other predicates or specific words get a greater score). This enables GRAPENLP to later compute the sentence interpretation with the greatest overall score for the case of ambiguous grammars. For instance, let it be the following sentence to be recognized by a chatbot:</p>
<p>Send Merry Christmas to the phone 555-555-555</p>
<p>GRAPENLP is able to understand that the message to send is "Merry Christmas" and not "Merry Christmas to the phone 555-555-555" if we define a grammar that uses predicate &lt;TOKEN&gt; to recognize the message and more restrictive predicates to recognize left and right contexts of the message. GRAPENLP ensures that the highest score interpretation is computed in O(n^3), and in linear time for most of the natural language sentences. In my experience, GRAPENLP is able to process thousands of sentences per second in a standard PC, and can also be run in smartphones in order to leverage backend processing.</p>
<h2>Supported platforms </h2>
<ul>
<li>Android (tested under Ubuntu 16.04 and 18.04 for API level 14 and all ABIs)</li>
<li>Alpine (tested 3.6, 3.7 &amp; 3.8)</li>
<li>MacOS (tested High Sierra)</li>
<li>Ubuntu (tested 16.04 &amp; 18.04)</li>
</ul>
<h2>Required compilation &amp; test tools </h2>
<ul>
<li>gcc 5.4.0 or greater</li>
<li>CMake 3.5 or greater</li>
<li>SWIG 3.0.8 or greater</li>
<li>Java JDK 8 for the Java SWIG interface</li>
<li>Python 3.6 for the Python SWIG interface</li>
<li>Google Test 1.7.0 or greater</li>
</ul>
<p>Additional requirements for building the Android binaries:</p>
<ul>
<li>Android SDK Platform (tested 4.0 IceCreamSandwich and 5.0 Lollipop)</li>
<li>Android SDK Tool CMake (tested 3.10.2.4988404 and 3.6.4111459)</li>
<li>Android NDK (tested 18.1.5063045)</li>
<li>Boost libraries compiled for Android (tested version 1.68)</li>
</ul>
<p>For compiling the Boost libraries for Android, first clone GrapeNLP's fork of the Boost-for-Android repo:</p>
<p>git clone <a href="#" onclick="location.href='mai'+'lto:'+'git'+'@g'+'ith'+'ub'+'.co'+'m'; return false;">git@g<span style="display: none;">.nosp@m.</span>ithu<span style="display: none;">.nosp@m.</span>b.com</a>:GrapeNLP/Boost-for-Android.git</p>
<p>Then make sure you have defined the following environment variables:</p>
<ul>
<li>ANDROID_SDK_ROOT: root folder of your Android SDK installation</li>
<li>NDK_ROOT: root folder of your NDK installation, usually $ANDROID_SDK_ROOT/ndk-bundle</li>
<li>BOOSTFORANDROID_ROOT: root folder of the Boost-for-Android clone</li>
</ul>
<p>Then enter the folder where you cloned Boost-for-Android and either run the following command for building the latest version of the Boost libraries:</p>
<p><code>build-android.sh $NDK_ROOT</code></p>
<p>or the following command to build a specific version X.Y.Z (e.g. 1.68.0):</p>
<p><code>build-android.sh --boost=X.Y.Z $NDK_ROOT</code></p>
<p>Latest working version tested was 1.68.0. Compilation of version 1.69.0 is not working.</p>
<h2>Dependencies </h2>
<ul>
<li>libboost-dev 1.58.0 or greater</li>
<li>libboost-program-options-dev 1.58.0 or greater</li>
</ul>
<h2>Installing from pre-compiled packages </h2>
<p>For Ubuntu there are precompiled packages available in Launchpad. First add the Launchpad repository and update the list of available packages:</p>
<p><code>sudo add-apt-repository ppa:grapenlp/ppa</code></p>
<p><code>sudo apt-get update</code></p>
<p>You may now install the needed packages as follows:</p>
<p><code>sudo apt-get install package_name</code></p>
<p>Available package names are:</p>
<ul>
<li>libgrapenlp: shared library containing the GrapeNLP engine</li>
<li>grapenlp: executable program allowing the usage of GrapeNLP from the command line</li>
<li>libgrapenlp-dev: headers and static libraries as well as the source files needed for compiling the SWIG interfaces for consuming GRAPENLP from Python and Java</li>
<li>libjgrapenlp: shared library containing the Java native interface for consuming GrapeNLP from Java</li>
</ul>
<h2>Building non-Android versions </h2>
<p>Let $TARGET be a target version, run the following script:</p>
<p><code>delivery/scripts/build.sh $TARGET</code></p>
<p>Available targets are</p><ul>
<li>release: recommended version for unattended operation</li>
<li>debug: version including debug symbols and printing execution traces</li>
</ul>
<p>The executable files will be placed inside folder</p>
<p><code>build/$TARGET/bin</code></p>
<p>and the libaries in folder</p>
<p><code>build/$TARGET/lib</code></p>
<p>For Linux platforms other than MacOS, the Debian packages listed in the previous section will also be generated in folder</p>
<p><code>build/$TARGET/package</code></p>
<p>Enter the package folder and either execute</p>
<p><code>sudo dpkg -i *.deb</code></p>
<p>to install all the packages or</p>
<p><code>sudo dpkg -i deb_file_1 deb_file_2 etc.</code></p>
<p>to install the selected packages.</p>
<p>Java interface files are placed in folder</p>
<p><code>build/$TARGET/java</code></p>
<p>and Python interface files in folder</p>
<p><code>build/$TARGET/python</code></p>
<p>You may copy them manually to create your own Java or Python programs, or use the Java or Python modules at</p>
<p><a href="https://github.com/GrapeNLP/jgrapenlp">https://github.com/GrapeNLP/jgrapenlp</a></p>
<p>and</p>
<p><a href="https://github.com/GrapeNLP/pygrapenlp">https://github.com/GrapeNLP/pygrapenlp</a></p>
<p>which already take care of copying the needed interface files upon install, provided that the librapenlp-dev library is installed.</p>
<p>Additionally, several Dockerfiles can be found in folder delivery/docker, which can be used for building docker images that contain all the needed tools for compiling grapenlp-core, namely:</p>
<ul>
<li>Alpine 3.6, 3.7 and 3.8</li>
<li>Ubuntu 16.04 and 18.04</li>
</ul>
<p>The purpose of these Dockerfiles is twofold:</p><ul>
<li>you may compile grapenlp-core with these docker images (indeed, for generating the Alpine version there is no other choice), or</li>
<li>you may install the compilation and test tools in your own machine, extracting the installation commands from the Dockerfile, then compile grapenlp-core in your machine.</li>
</ul>
<p>For the second option, follow the Dockerfile that corresponds to your system. Note that it is not possible to make a MacOS docker image, so I cannot provide such a Dockerfile. However, you can install the C++ compiler and a git client by installing XCode from the Apple Store, and cmake, swig, boost and python with brew (see <a href="https://brew.sh/">https://brew.sh/</a>). GoogleTest must be compiled from the sources, which can be downloaded from <a href="https://github.com/google/googletest/releases">https://github.com/google/googletest/releases</a>. Finally, installation instructions of the JDK in MacOS can be found in the Web.</p>
<p>For building the docker images, enter the folder with the Dockerfile you want to build (e.g. delivery/docker/ubuntu/16.04) and type the following command, replacing "image_name" with the name you want to give the image (e.g. grapenlp-ubuntu1604):</p>
<p><code>docker build -t image_name .</code></p>
<p>To run the image, type the following command replacing "image_name" with the name you chose for the image:</p>
<p><code>docker run -it image_name bash</code></p>
<p>Once inside the docker, type the following command to switch to the build user (compiling grapenlp-core does not require special permissions):</p>
<p><code>su build</code></p>
<p>You can clone the project without having to create a GitHub account with the following command:</p>
<p><code>git clone git://github.com/GrapeNLP/grapenlp-core.git</code></p>
<p>Now enter the project folder:</p>
<p><code>cd grapenlp-core</code></p>
<p>Finally, run the build script as explained at the beginning of this section.</p>
<h2>Building the Android version </h2>
<p>In order to build GrapeNLP for a particular Android ABI $ANDROID_ABI and Android native API level $ANDROID_NATIVE_API_LEVEL, run the script</p>
<p><code>delivery/script/buildforandroid.sh release $ANDROID_ABI $ANDROID_NATIVE_API_LEVEL</code></p>
<p>For the moment it is not possible to compile the debug version for Android, so the target version must be <code>release</code>.</p>
<p>Available Android ABIs, depending on your NDK version, are:</p><ul>
<li>armeabi (up to NDK r16)</li>
<li>arm64-v8a</li>
<li>armeabi-v7a</li>
<li>mips (up to NDK r16)</li>
<li>mips64 (up to NDK r16)</li>
<li>x86</li>
<li>x86_64</li>
</ul>
<p>Note that NDK versions r17 and onwards no longer support ABIs armeabi, mips and mips64. If needed, you may download an older NDK version from</p>
<p><a href="https://developer.android.com/ndk/downloads/older_releases">https://developer.android.com/ndk/downloads/older_releases</a></p>
<p>Android native API levels are to be specified as integer numbers (e.g. 21 for Android Lollipop). A comprehensive list of native API levels can be found at</p>
<p><a href="https://developer.android.com/ndk/guides/stable_apis">https://developer.android.com/ndk/guides/stable_apis</a></p>
<p>As for the non-Android build, native libraries are placed in folder</p>
<p><code>build/$TARGET-$ANDROID_ABI-$ANDROID_NATIVE_API_LEVEL/lib</code></p>
<p>and Java interface files in folder</p>
<p><code>build/$TARGET-$ANDROID_ABI-$ANDROID_NATIVE_API_LEVEL/java</code></p>
<p>In order to use GrapeNLP in an Android app, copy the libjgrapenlp.so file inside the lib folder to your Android project folder</p>
<p><code>app/src/main/jniLibs/$ANDROID_ABI</code></p>
<p>and the Java files to folder</p>
<p><code>app/src/main/java</code></p>
<p>respecting the Java package folder structure (com/grapenlp/core).</p>
<p>Note that instantiating the grammar engine requires to load a grammar file and 2 dictionary files from the local file system. Make sure that these files are stored somewhere in the device file system and that the Android application is granted the READ_EXTERNAL_STORAGE permission, that is, remember to add the following line to the AndroidManifest.xml:</p>
<p><code>&lt;uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/&gt;</code></p>
<p>In case you want to support multiple ABIs, invoke the <code>buildforandroid.sh</code> script once per ABI and copy the generated .so files to the corresponding $ANDROID_ABI folder in your Android project.</p>
<p>For an example of Android app using GrapeNLP visit</p>
<p><a href="https://github.com/GrapeNLP/agrapenlp-testapp">https://github.com/GrapeNLP/agrapenlp-testapp</a></p>
<h2>Changelog </h2>
<p>See file <a href="CHANGES">CHANGES</a></p>
<h2>License </h2>
<p><a href="LICENSE"></a></p>
<p>This program is licensed under the <a href="LICENSE">GNU Lesser General Public License version 2.1</a>. Contact <a href="#" onclick="location.href='mai'+'lto:'+'jav'+'ie'+'r.s'+'as'+'tre'+'@t'+'ele'+'fo'+'nic'+'a.'+'net'; return false;">Javier Sastre</a> for further inquiries.</p>
<p>Some files for the implementation of Unicode management have been borrowed from the Unitex project, which is licensed under the same license. More information on Unitex can be found at</p>
<p><a href="https://unitexgramlab.org/">https://unitexgramlab.org/</a></p>
<p>Boost-for-Android is a set of tools to compile the main part of the Boost C++ Libraries for the Android platform. Boost-for-Android is licensed under the Apache License 2.0. The GrapeNLP group comprises a fork of the Boost-for-Android repo for convenience. The original repo can be found at</p>
<p><a href="https://github.com/moritz-wundke/Boost-for-Android">https://github.com/moritz-wundke/Boost-for-Android</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
